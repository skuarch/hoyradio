var loader="<img src='img/ajax-loader.gif'/>";var start=0;var maxResults=12;var playerStatus="stop";function addClick(a){$.ajax({url:"addClick",type:"POST",async:false,data:{g:a}})}function beforeStations(){start=start-maxResults;if(start<0){start=0}stations(start,maxResults)}function cancelFormSubmission(){return false}function getUrlVars(){var b={};var a=window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(c,d,e){b[d]=e});return b}function getStationsByClick(){$("#stationsByClick").html(loader);$.ajax({url:"stationsByClick",type:"POST",data:{order:"desc"},success:function(a){$("#stationsByClick").html(a)}})}function getStationsByOrder(){$("#stationsByOrder").html(loader);$.ajax({url:"stationsByOrder",type:"POST",data:{order:"desc"},success:function(a){$("#stationsByOrder").html(a)}})}function getStationsByPosition(){$("#stationsByPosition").html(loader);$.ajax({url:"stationsByPosition",type:"POST",data:{order:"desc"},success:function(a){$("#stationsByPosition").html(a)}})}function moreStations(){stations(start+=12,maxResults)}function player(c,a,b){$("#jquery_jplayer_1").jPlayer("stop");$("#jquery_jplayer_1").jPlayer("destroy");$("#jquery_jplayer_1").jPlayer("volume",1);if(b===1){c+="/;stream/1";$("#jquery_jplayer_1").jPlayer({ready:function(){$(this).jPlayer("setMedia",{mp3:c}).jPlayer(a)},preload:"metadata",errorAlerts:false,swfPath:"js/",supplied:"mp3,m4a,aacp,oga",volume:0.4,solution:"flash,html",wmode:"window"})}else{$("#jquery_jplayer_1").jPlayer({ready:function(){$(this).jPlayer("setMedia",{oga:c}).jPlayer(a)},preload:"metadata",errorAlerts:false,swfPath:"js/",supplied:"oga",volume:0.4,solution:"flash,html",wmode:"window"})}}function playByGet(){var a=getUrlVars()["id"];if(a!==undefined){if(isNaN(a)){return}$.ajax({type:"GET",dataType:"json",contentType:"application/json",url:"getStation",data:{id:a,param:Math.random()},cache:false,success:function(b){player(b.url,"play",b.type)}})}}function playStation(a,c,d,b){$("#modalLoading").show();player(a,"pause",d);setPlayer("pause");$("#stationTitle").html(b);setTimeout(function(){setPlayer("play")},2100);setTimeout(function(){$("#modalLoading").fadeOut(500)},3000);setTimeout(function(){alertify.success(b)},400);setTimeout(function(){addClick(b)},1)}function setPlayer(a){if(a===""||a===undefined){return}if(a==="play"||a==="pause"||a==="stop"||a==="destroy"){$("#jquery_jplayer_1").jPlayer(a);playerStatus=a}}function stations(b,a){$("#resultsStations").html(loader);$.ajax({url:"stations",type:"POST",data:{start:b,maxResults:a},success:function(c){$("#resultsStations").html(c)}})}$("#player-img").click(function(){if(playerStatus==="stop"){setPlayer("play");playerStatus="play";$("#player-img").attr("src","img/play.png")}else{if(playerStatus==="pause"){setPlayer("play");playerStatus="play";$("#player-img").attr("src","img/play.png")}else{setPlayer("pause");playerStatus="pause";$("#player-img").attr("src","img/pause.png")}}});function toggleStation(){$("#st").toggleClass("alert-warning")}function search(){var a=$("#searchField").val();if(a===undefined||a===""||a==="undefined"||a.length<3){return}a=escape(a);$("#resultsStations").html(loader);$.ajax({url:"search",data:{stringToSearch:a},type:"POST",success:function(b){$("#resultsStations").html(b)}})}function backTopStations(){start=0;stations(start,maxResults)}$(document).ready(function(){player("http://129.21.180.18:8001/pirate-192","stop",1);setTimeout(function(){playByGet()},0);setTimeout(function(){stations(0,maxResults)},1);setTimeout(function(){getStationsByClick()},2);setTimeout(function(){getStationsByOrder()},3)});